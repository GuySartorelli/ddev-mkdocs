name: ddev-mkdocs

pre_install_actions:
  - test -d ${DDEV_APPROOT}/docs || mkdir -p ${DDEV_APPROOT}/docs
  - test -d ${DDEV_APPROOT}/docs/docs || mkdir -p ${DDEV_APPROOT}/docs/docs
  - test -f ${DDEV_APPROOT}/docs/mkdocs.yml || echo "site_name: Mkdocs docs\ntheme: material\ndev_addr: '0.0.0.0:8080'\nnav:\n  - Home: index.md" > ${DDEV_APPROOT}/docs/mkdocs.yml;
  - test -f ${DDEV_APPROOT}/docs/docs/index.md || echo "## Welcome to Mkdocs" > ${DDEV_APPROOT}/docs/docs/index.md

project_files:
- docker-compose.mkdocs.yaml

post_install_actions:
 - mv -R ${DDEV_APPROOT}/.ddev/docs ${DDEV_APPROOT}/
 - echo "Mkdocs install finished. Please restart ddev with 'ddev restart'"
 